// Suponga que se tiene un curso con 50 alumnos. Cada alumno debe realizar una tarea y existen 10 enunciados posibles. 
// Una vez que todos los alumnos eligieron su tarea, comienzan a realizarla. Cada vez que un alumno termina su tarea, 
// le avisa al profesor y se queda esperando el puntaje del grupo, el cual está dado por todos aquellos que comparten el mismo enunciado. 
// Cuando un grupo terminó, el profesor les otorga un puntaje que representa el orden en que se terminó esa tarea de las 10 posibles.

// Nota: Para elegir la tarea suponga que existe una función elegir que le asigna una tarea a un alumno (esta función asignará 10 tareas diferentes 
// entre 50 alumnos, es decir, que 5 alumnos tendrán la tarea 1, otros 5 la tarea 2 y así sucesivamente para las 10 tareas).

// Respuesta
// Nota: Este ejercicio fue consultado y esta bien resuelto.

sem mutex = 1;
sem barreraAlumnos = 0;
sem despiertoMaestro = 0;
sem seDioPuntaje[10] = ([10] 0);
int puntajeTarea[10] = ([10] 0);
int contador = 0;
cola finalizadas;

Process alumno[i:0..49]{
    int tarea; int puntaje; int j;
    P(mutex);
    tarea = elegir();
    contador++;
    if (contador == 50){
        for j = 1..50 -> V(barreraAlumnos);
    }
    V(mutex);
    P(barreraAlumnos);
    //realizar tarea
    P(mutex);
    finalizadas.push(tarea);
    V(mutex);
    V(despiertoMaestro);
    P(seDioPuntaje[tarea]);
    puntaje = puntajeTarea[tarea];
}

Process profesor{
    int puntaje=10; int contadorTarea[10] = ([10] 0); int j; int tarea; int i;
    for j = 1..50{
        P(despiertoMaestro);
        P(mutex);
        tarea = finalizadas.pop();
        V(mutex);
        contadorTarea[tarea]++;
        if (contadorTarea[tarea] == 5){
            puntajeTarea[tarea] = puntaje;
            for i = 1..5 -> V(seDioPuntaje[tarea]);
            puntaje--;
        }
    }
}